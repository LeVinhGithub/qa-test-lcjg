import { Given, When, Then } from '@wdio/cucumber-framework';
import welcomePage from '../pageobjects/welcome.page';
import { retryAsync } from 'ts-retry';

Given(/^I am on the welcome page$/, async () => {
  await welcomePage.openPage();
  await retryAsync(
    async () => {
      let htmlSnapshot = await welcomePage.getHTMLSnapshot();
      expect(htmlSnapshot).toBe(
        `<head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><style data-href="/test-site-qa/styles.84637b9cc8eb1149a850.css" data-identity="gatsby-global-css">#main-content{margin:auto;text-align:center;width:600px}.greeting-message{display:inline-block;font-size:36px}#main-instruction{text-align:start}#main-instruction li{margin:5px}@-webkit-keyframes spiral-0{0%{-webkit-transform:rotate(0deg) translate(150px) rotate(0deg);transform:rotate(0deg) translate(150px) rotate(0deg)}to{-webkit-transform:rotate(1turn) translate(0) rotate(-1turn);transform:rotate(1turn) translate(0) rotate(-1turn)}}@keyframes spiral-0{0%{-webkit-transform:rotate(0deg) translate(150px) rotate(0deg);transform:rotate(0deg) translate(150px) rotate(0deg)}to{-webkit-transform:rotate(1turn) translate(0) rotate(-1turn);transform:rotate(1turn) translate(0) rotate(-1turn)}}@-webkit-keyframes spiral-1{0%{-webkit-transform:rotate(40deg) translate(150px) rotate(-40deg);transform:rotate(40deg) translate(150px) rotate(-40deg)}to{-webkit-transform:rotate(400deg) translate(0) rotate(-400deg);transform:rotate(400deg) translate(0) rotate(-400deg)}}@keyframes spiral-1{0%{-webkit-transform:rotate(40deg) translate(150px) rotate(-40deg);transform:rotate(40deg) translate(150px) rotate(-40deg)}to{-webkit-transform:rotate(400deg) translate(0) rotate(-400deg);transform:rotate(400deg) translate(0) rotate(-400deg)}}@-webkit-keyframes spiral-2{0%{-webkit-transform:rotate(80deg) translate(150px) rotate(-80deg);transform:rotate(80deg) translate(150px) rotate(-80deg)}to{-webkit-transform:rotate(440deg) translate(0) rotate(-440deg);transform:rotate(440deg) translate(0) rotate(-440deg)}}@keyframes spiral-2{0%{-webkit-transform:rotate(80deg) translate(150px) rotate(-80deg);transform:rotate(80deg) translate(150px) rotate(-80deg)}to{-webkit-transform:rotate(440deg) translate(0) rotate(-440deg);transform:rotate(440deg) translate(0) rotate(-440deg)}}@-webkit-keyframes spiral-3{0%{-webkit-transform:rotate(120deg) translate(150px) rotate(-120deg);transform:rotate(120deg) translate(150px) rotate(-120deg)}to{-webkit-transform:rotate(480deg) translate(0) rotate(-480deg);transform:rotate(480deg) translate(0) rotate(-480deg)}}@keyframes spiral-3{0%{-webkit-transform:rotate(120deg) translate(150px) rotate(-120deg);transform:rotate(120deg) translate(150px) rotate(-120deg)}to{-webkit-transform:rotate(480deg) translate(0) rotate(-480deg);transform:rotate(480deg) translate(0) rotate(-480deg)}}@-webkit-keyframes spiral-4{0%{-webkit-transform:rotate(160deg) translate(150px) rotate(-160deg);transform:rotate(160deg) translate(150px) rotate(-160deg)}to{-webkit-transform:rotate(520deg) translate(0) rotate(-520deg);transform:rotate(520deg) translate(0) rotate(-520deg)}}@keyframes spiral-4{0%{-webkit-transform:rotate(160deg) translate(150px) rotate(-160deg);transform:rotate(160deg) translate(150px) rotate(-160deg)}to{-webkit-transform:rotate(520deg) translate(0) rotate(-520deg);transform:rotate(520deg) translate(0) rotate(-520deg)}}</style><meta name="generator" content="Gatsby 3.12.1"><link as="script" rel="preload" href="/test-site-qa/webpack-runtime-f15a7ef559a56b845e8c.js"><link as="script" rel="preload" href="/test-site-qa/framework-3ec6dcf53c44c41c914f.js"><link as="script" rel="preload" href="/test-site-qa/app-f6b8bd412598968d6a9f.js"><link as="script" rel="preload" href="/test-site-qa/component---src-pages-index-js-9e9525bdab8a3db6e782.js"><link as="fetch" rel="preload" href="/test-site-qa/page-data/index/page-data.json" crossorigin="anonymous"><link as="fetch" rel="preload" href="/test-site-qa/page-data/app-data.json" crossorigin="anonymous"><link rel="prefetch" href="/test-site-qa/page-data/products/page-data.json" crossorigin="anonymous" as="fetch"><link rel="prefetch" href="/test-site-qa/component---src-pages-products-js-d1f7f5961be508c2b6f5.js"></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main><title>QA Engineer challenge</title><div id="main-content" data-testid="main-content-container"><div style="padding:30px" data-testid="main-greeting-container"><div><div style="animation:spiral-0 2s" class="greeting-message">W</div><div style="animation:spiral-1 2s" class="greeting-message">E</div><div style="animation:spiral-2 2s" class="greeting-message">L</div><div style="animation:spiral-3 3s" class="greeting-message">C</div><div style="animation:spiral-4 4s" class="greeting-message">O</div><div style="animation:spiral-0 3s" class="greeting-message">M</div><div style="animation:spiral-1 3s" class="greeting-message">E</div><div style="animation:spiral-2 4s" class="greeting-message">!</div></div></div><div id="main-instruction" data-testid="main-instruction"><p>Greetings! Thank you for taking the time for our technical challenge, we hope you enjoy your time hereðŸ˜ƒ</p><p>This is the 2nd stage of our recruitment process</p><p>We would like to ask you to create some automated tests to demonstrate your skills, here are the general instructions:</p><ol><li>relax, this challenge is expected to consume less than <u>8 hours</u></li><li>please write tests cases and automated test scripts for this site (<b>this page</b> and the <a data-testid="main-instruction-products-link" href="/test-site-qa/products">Product Page</a>, mainly)</li><li>automated test scripts with selenium/cypress/jest/Puppeteer or any test frameworks that we can run your tests</li><li>provide some simple instructions on how can we run the tests</li><li>a brief explanation/assumptions or what do the tests cover, for example, what success cases and failed cases are considered</li></ol><p style="margin-top:20px">we would like to ask you to pick one of the following methods to send us your work:</p><ul><li>compress the source file and email to <a href="mailto:betalabstech@lcjgroup.com">betalabstech@lcjgroup.com</a></li><li style="margin-top:20px"><ol><li>create a private repository on github</li><li>invite <a data-testid="main-instruction-collaborator" href="https://github.com/lcjg-betalabstech">lcjg-betalabstech</a> as a collaborator once you are happy to show your work</li></ol></li><li style="margin-top:20px"><ol><li>compress all your works</li><li>upload it to a cloud service, e.g. Dropbox/Google Drive</li><li>send us the link to get the compressed file</li></ol></li></ul><div data-testid="main-instruction-remarks"><div>* for this page, a simple snapshot test should be good enough,</div><div style="font-size:12px">of course, you are welcome to add more</div><div>** It will great if you can suggest what improvements we can make</div></div></div></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-854ad9718a3e18c42d0e.js"],"app":["/app-f6b8bd412598968d6a9f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e56e5249ff6d9095cb33.js"],"component---src-pages-index-js":["/component---src-pages-index-js-9e9525bdab8a3db6e782.js"],"component---src-pages-products-js":["/component---src-pages-products-js-d1f7f5961be508c2b6f5.js"]};/*]]>*/</script><script src="/test-site-qa/polyfill-854ad9718a3e18c42d0e.js" nomodule=""></script><script src="/test-site-qa/component---src-pages-index-js-9e9525bdab8a3db6e782.js" async=""></script><script src="/test-site-qa/app-f6b8bd412598968d6a9f.js" async=""></script><script src="/test-site-qa/framework-3ec6dcf53c44c41c914f.js" async=""></script><script src="/test-site-qa/webpack-runtime-f15a7ef559a56b845e8c.js" async=""></script></body>`,
      );
    },
    { delay: 1000, maxTry: 5 },
  );
});
